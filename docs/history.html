<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Istoric Retrageri - CryptoVault</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Istoric Retrageri</h1>
    <div id="withdrawalHistory"></div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const historyContainer = document.getElementById("withdrawalHistory");
      const user = JSON.parse(localStorage.getItem("user"));
      const allRequests = JSON.parse(localStorage.getItem("withdrawals")) || [];

      const userRequests = allRequests.filter(req => req.email === user.email);

      if (userRequests.length === 0) {
        historyContainer.innerHTML = "<p>Nu existÄƒ cereri de retragere.</p>";
        return;
      }

      userRequests.reverse().forEach(req => {
        const div = document.createElement("div");
        div.classList.add("withdrawal-entry");
        div.innerHTML = `
          <p><strong>Suma:</strong> ${req.amount} USDT</p>
          <p><strong>Data:</strong> ${new Date(req.timestamp).toLocaleString()}</p>
          <p><strong>Status:</strong> 
            <span class="status-${req.status}">
              ${req.status.charAt(0).toUpperCase() + req.status.slice(1)}
            </span>
          </p>
        `;
        historyContainer.appendChild(div);
      });
    });
  </script>
</body>
</html>
